<h2 class="text-center">Event</h2>
<mat-dialog-content>
  <form class="event-form">
    <mat-form-field class="event-form__form-field">
      <mat-label>Name</mat-label>
      <input
        #eventNameInput
        matInput
        placeholder="Cardio working-out #3"
        required
        type="text">
      <mat-hint aling="start"><strong>Avoid long names. Less is more</strong></mat-hint>
      <mat-hint align="end">{{eventNameInput.value.length}}/{{eventNameMaxLength}}</mat-hint>
    </mat-form-field>
    <mat-form-field class="event-form__form-field">
      <mat-label>Description</mat-label>
      <textarea
        class="event-form__description-input"
        matInput
        placeholder="Working out was good, but there is some strange heartache. Maybe, it is needed to visit a doctor..."></textarea>
      <mat-hint><strong>No limits</strong></mat-hint>
    </mat-form-field>

    <mat-divider class="event-form__divider-line"></mat-divider>

    <h3 class="event-form__section-header">Event details</h3>
    <section class="event-form__event-detail-section">
      <span>
        <b class="event-form__event-detail-section__text mat-typography">Creation time: 01/01/2020 10:12</b>
      </span>
    </section>
    <section class="event-form__event-detail-section">
      <span>
        <b class="event-form__event-detail-section__text mat-typography">Last modified: 01/01/2020 10:12</b>
      </span>
    </section>
    <section class="event-form__event-detail-section">
      <mat-form-field class="event-form__small-form-field">
        <mat-label>Event date</mat-label>
        <mat-datepicker #eventDatePicker disabled="false"></mat-datepicker>
        <mat-datepicker-toggle [for]="eventDatePicker" matSuffix></mat-datepicker-toggle>
        <input [matDatepicker]="eventDatePicker" disabled matInput>
      </mat-form-field>
    </section>
    <section class="flexbox-row event-form__event-detail-section">
      <mat-form-field class="event-form__small-form-field">
        <mat-label>Time-bounds</mat-label>
        <mat-select #timeBoundSelect>
          <mat-option *ngFor="let timeBoundOption of eventTimeBoundOptions" [value]="timeBoundOption">
            {{timeBoundOption.name}}
          </mat-option>
        </mat-select>
        <mat-hint>{{(timeBoundSelect.value && timeBoundSelect.value.description) || '' }}</mat-hint>
      </mat-form-field>
      <div *ngIf="timeBoundSelect.value === timeBoundedOption">
        <mat-form-field class="event-form__time-bound-form-field event-form__extra-small-form-field">
          <mat-label>Start time</mat-label>
          <input matInput required type="time">
        </mat-form-field>
        <mat-form-field class="event-form__time-bound-form-field event-form__extra-small-form-field">
          <mat-label>End time</mat-label>
          <input matInput required type="time">
        </mat-form-field>
      </div>
    </section>
    <section class="event-form__attachment-section event-form__event-detail-section">
      <ngx-file-drop
        [multiple]="true"
        [showBrowseBtn]="true"
        browseBtnClassName="attachment-form-browse-button"
        contentClassName="attachment-form-area-content"
        dropZoneClassName="attachment-form-drop-zone"
        dropZoneLabel="Drop attachments here"></ngx-file-drop>
    </section>
    <h3 class="event-form__section-header">Event structure</h3>
    <mat-form-field class="event-form__small-form-field">
      <mat-label>Category</mat-label>
      <mat-select #eventCategorySelect>
        <mat-option *ngFor="let category of categories$ | async" [value]="category">{{category.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <ng-container *ngIf="eventCategorySelect.value && eventCategorySelect.value.attributes.length > 0">
      <h3 class="event-form__section-header">Metrics</h3>
      <section *ngFor="let attribute of eventCategorySelect.value.attributes" class="event-form__event-detail-section">
        <app-parameter [attribute]="attribute"></app-parameter>
      </section>
    </ng-container>
  </form>
</mat-dialog-content>
<mat-dialog-actions class="dialog-actions">
  <button color="warn" mat-button mat-dialog-close>Cancel</button>
  <button [disabled]="false" [mat-dialog-close]=""
          color="primary" mat-button>Create
  </button>
</mat-dialog-actions>
