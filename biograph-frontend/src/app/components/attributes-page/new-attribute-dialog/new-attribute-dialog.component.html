<h2 class="text-center" mat-dialog-title>Create new metric</h2>
<mat-dialog-content>
  <form class="new-attribute-form">
    <mat-form-field class="attribute-dialog-form-field">
      <mat-label>Name</mat-label>
      <input #attributeNameInput
             [(ngModel)]="attribute.name"
             [formControl]="attributeNameFormControl"
             matInput
             placeholder="Ex. 'Weight'"
             required type="text">
      <mat-hint align="start"><strong>Be concise, don't use long names</strong></mat-hint>
      <mat-hint align="end">{{attributeNameInput.value.length}} / {{attributeNameMaxLength}}</mat-hint>
      <mat-error *ngIf="attributeNameFormControl.invalid">
        {{getAttributeNameValidationErrorMessage()}}
      </mat-error>
    </mat-form-field>
    <mat-form-field class="attribute-dialog-form-field">
      <mat-label>Description</mat-label>
      <textarea [(ngModel)]="attribute.description"
                [ngModelOptions]="{standalone:true}"
                class="attribute-description-input"
                matInput
                placeholder="Ex. 'My weight in kilograms'"
                type="text"></textarea>
      <mat-hint align="start"><strong>Add short description to your metric</strong></mat-hint>
    </mat-form-field>
    <div class="attribute-type-definition">
      <mat-form-field class="attribute-dialog-form-field__left-aligned">
        <mat-label>Metric type</mat-label>
        <mat-select [formControl]="attributeTypeFormControl" required>
          <mat-option *ngFor="let attributeType of attributeTypesList" [value]="attributeType">
            {{attributeType.name}}
          </mat-option>
        </mat-select>
        <mat-hint align="start">{{attributeTypeFormControl.value.description}}</mat-hint>
        <mat-error *ngIf="attributeTypeFormControl.invalid">
          Metric type is required
        </mat-error>
      </mat-form-field>
      <ng-container *ngIf="this.attributeTypeFormControl.value === this.attributeTypes.number">
        <mat-form-field class="attribute-dialog-form-field__left-aligned">
          <mat-label>Constraint type</mat-label>
          <mat-select #numberConstraintTypeSelect>
            <mat-option value="noConstraints">No constraints</mat-option>
            <mat-option value="between">Between</mat-option>
            <mat-option value="lessThan">Less than</mat-option>
            <mat-option value="greaterThan">Greater than</mat-option>
          </mat-select>
          <mat-hint *ngIf="numberConstraintTypeSelect.value">Inclusively</mat-hint>
        </mat-form-field>
        <div *ngIf="numberConstraintTypeSelect.value === 'between'">
          <mat-form-field appearance="outline" class="short-number-form-field">
            <mat-label class="centered-label">min</mat-label>
            <input matInput placeholder="10" type="number">
          </mat-form-field>
          <span>and</span>
          <mat-form-field appearance="outline" class="short-number-form-field">
            <mat-label>max</mat-label>
            <input matInput placeholder="20" type="number">
          </mat-form-field>
        </div>
        <ng-container *ngIf="numberConstraintTypeSelect.value === 'lessThan'">
          <mat-form-field appearance="outline" class="short-number-form-field">
            <mat-label>Max</mat-label>
            <input matInput placeholder="20" type="number">
          </mat-form-field>
        </ng-container>
        <ng-container *ngIf="numberConstraintTypeSelect.value === 'greaterThan'">
          <mat-form-field appearance="outline" class="short-number-form-field">
            <mat-label>Min</mat-label>
            <input matInput placeholder="10" type="number">
          </mat-form-field>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="this.attributeTypeFormControl.value === this.attributeTypes.enumeration">
        <mat-form-field appearance="outline">
          <mat-label>List of string values</mat-label>
          <input matInput placeholder="Ex. 'Yes,No,Maybe'" type="text">
          <mat-hint>Separate values by comma</mat-hint>
        </mat-form-field>
      </ng-container>
    </div>
  </form>
</mat-dialog-content>
<mat-dialog-actions class="dialog-actions">
  <button color="warn" mat-button mat-dialog-close>Cancel</button>
  <button [disabled]="formGroup.invalid" [mat-dialog-close]="attribute" color="primary" mat-button>Create
  </button>
</mat-dialog-actions>
